webpackJsonp([7],{0:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),i=o(r),u=n(21),s=n(14),c=n(25),a=n(456),l=o(a),f=n(464),d=o(f);n(445);var p=(0,d["default"])();(0,c.syncHistoryWithStore)(s.browserHistory,p);(0,u.render)(i["default"].createElement(l["default"],{store:p,history:s.browserHistory}),document.getElementById("root"))},129:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(){return{type:"COUNTDOWN_PROGRESS"}}function u(){return{type:"TOGGLE_ACTIVITY_INDICATOR"}}function s(){return{type:"TOGGLE_COUNTDOWN"}}function c(e){return{type:"ANSWER_QUESTION",id:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.postAnswers=t.saveAnswer=t.fetchEntities=t.setChecksum=t.receiveGameSettings=t.receiveEntities=void 0,t.advanceCountDown=i,t.toggleActivityIndicator=u,t.toggleCountDown=s,t.answerQuestion=c,n(37);var a=n(38),l=n(462),f=r(l),d=n(42),p=(r(d),n(77)),h=o(p),v=t.receiveEntities=function(e){return{type:"RECEIVE_ENTITIES",response:{entities:e}}},y=t.receiveGameSettings=function(e){return{type:"RECEIVE_SETTINGS",settings:e}};t.setChecksum=function(e){return{type:"SET_CHECKSUM",checksum:e}},t.fetchEntities=function(e){var t="https://local.installthisapp.com/"+e+"/canvas_entities.json";return function(e){return fetch(t,{method:"GET",headers:{Authorization:'Token token="'+window.canvasApiKey+'"'}}).then(function(e){return e.json()}).then(function(t){if("ok"==t.status){var n=h["default"].camelizeKeys(t),o=(0,a.normalize)(n,f.entities);e(v(o.entities)),e(y(n.settings)),e(u()),e(s())}else console.log("already answered all questions")})["catch"](function(e){return console.log("parsing failed",e)})}},t.saveAnswer=function(e,t,n){return{type:"SAVE_ANSWER",payload:{questionId:e,optionId:t,correct:n}}},t.postAnswers=function(){return function(e,t){var n={answers:t().answers},o=t().settings.checksum,r="https://local.installthisapp.com/"+o+"/save.json";return fetch(r,{method:"POST",headers:{Authorization:'Token token="'+window.canvasApiKey+'"',Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){console.log("answers posted and received",e)})["catch"](function(e){return console.log("parsing failed",e)})}}},450:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=o(r),u=function(e){var t=e.time;return i["default"].createElement("div",null,i["default"].createElement("h1",{className:"ita-cali-countdown-text"},i["default"].createElement("span",null,t)))};t["default"]=u},451:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(1),a=o(c),l=n(10),f=n(450),d=o(f),p=n(455),h=o(p),v=n(454),y=o(v),m=n(129),g=n(463),b=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.countDownRunning,n=e.time,o=e.toggleCountDown,r=(e.question,e.postAnswers,setInterval(function(){return!!t&&void(n>0||(o(),clearInterval(r)))},1e3))}},{key:"render",value:function(){var e=this.props,t=e.time,n=e.question,o=e.loading,r=e.saveAnswer,i=e.postAnswers;return console.log("viene question",n),n||o||i(),a["default"].createElement("div",{className:"col-sm-12"},o||!n?a["default"].createElement("h1",null,"Loading"):a["default"].createElement("div",null,a["default"].createElement(d["default"],{time:t}),a["default"].createElement(h["default"],{text:n.text}),a["default"].createElement(y["default"],{options:n.options,handleClick:function(e,t){return r(n.id,e,t)}})))}}]),t}(c.Component),w=function(e,t){return{time:e.settings.timeOut,countDownRunning:e.settings.countDownRunning,question:(0,g.getQuestionWithOptions)(e),loading:e.settings.isFetching}},_=function(e,t){return{startCounter:function(){return e((0,m.advanceCountDown)())},toggleCountDown:function(){return e((0,m.toggleCountDown)())},saveAnswer:function(t,n,o){e((0,m.saveAnswer)(t,n,o)),e((0,m.answerQuestion)(t))},postAnswers:function(){return e((0,m.postAnswers)())}}};t["default"]=(0,l.connect)(w,_)(b)},452:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(1),a=o(c),l=n(10),f=n(371),d=o(f),p=n(25),h=n(50),v=(o(h),n(129));n(37);var y=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.state={logging:!1},n.digestFacebookResponse=n.digestFacebookResponse.bind(n),n}return u(t,e),s(t,[{key:"componentDidMount",value:function(){}},{key:"digestFacebookResponse",value:function(e){this.setState({logging:!0}),this.props.digestFacebookResponse(e)}},{key:"render",value:function(){var e=this;this.props.digestFacebookResponse;return a["default"].createElement("div",{className:"text-center"},a["default"].createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%)"}},this.state.logging?a["default"].createElement("button",{className:"btn btn-primary btn-lg",disabled:!0},"Please wait..."):a["default"].createElement(d["default"],{appId:window.appId,cssClass:"btn btn-primary btn-lg",autoLoad:!0,textButton:"Sign In",callback:function(t){return e.digestFacebookResponse(t)}})))}}]),t}(c.Component),m=function(e,t){return{}},g=function(e,t){return{digestFacebookResponse:function(t){t.signedRequest?fetch("https://local.installthisapp.com/users.json",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({signed_request:t.signedRequest,checksum:window.checksum})}).then(function(e){return e.text()}).then(function(t){window.canvasApiKey=t,e((0,p.push)("/"+window.canvasId+"/"+window.checksum+"/logged")),e((0,v.fetchEntities)(window.checksum))})["catch"](function(e){console.log("Login: parsing failed",e)}):console.log("response",t)}}};t["default"]=(0,l.connect)(m,g)(y)},453:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=o(r),u=function(e){var t=(e.id,e.text),n=e.handleClick,o=e.correct;return i["default"].createElement("a",{className:"list-group-item ita-cali-option-block",onClick:function(){return n()}},i["default"].createElement("i",{className:"h4 ita-checkbox-icon animated zoomIn"}),i["default"].createElement("h4",{className:"list-group-item-heading"},t," ",o?"correcto":"incorrecto"))};t["default"]=u},454:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=o(r),u=n(453),s=o(u),c=function(e){var t=e.options,n=e.handleClick;return i["default"].createElement("div",{className:"list-group"},t.map(function(e){return i["default"].createElement(s["default"],{key:e.id,id:e.id,text:e.text,correct:e.correct,handleClick:function(){return n(e.id,e.correct)}})}))};t["default"]=c},455:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=o(r),u=function(e){var t=e.text;return i["default"].createElement("div",null,i["default"].createElement("h4",{className:"ita-cali-question-text"},i["default"].createElement("span",{className:""},t)))};t["default"]=u},456:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(1),a=o(c),l=n(10),f=n(14),d=n(129),p=n(451),h=o(p),v=n(452),y=o(v),m=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return u(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e((0,d.setChecksum)(window.checksum))}},{key:"render",value:function(){var e=this.props,t=e.store,n=e.history;return a["default"].createElement(l.Provider,{store:t},a["default"].createElement(f.Router,{history:n},a["default"].createElement(f.Route,{path:"/"+window.canvasId+"/(:checksum)/logged",component:h["default"]}),a["default"].createElement(f.Route,{path:"/"+window.canvasId+"/(:checksum)",component:y["default"]}),a["default"].createElement(f.Route,{path:"/"+window.canvasId,component:y["default"]})))}}]),t}(c.Component);m.propTypes={store:c.PropTypes.object.isRequired,history:c.PropTypes.object.isRequired},t["default"]=(0,l.connect)()(m)},457:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],t=arguments[1];switch(t.type){case"ANSWER_QUESTION":var n=e;return n.push(t.id),n;default:return e}};t["default"]=n},458:function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=arguments.length<=0||void 0===arguments[0]?{correct:0,incorrect:0,details:{}}:arguments[0],t=arguments[1];switch(t.type){case"SAVE_ANSWER":var o=t.payload,r=o.questionId,i=o.optionId,u=o.correct,s=u?e.correct+1:e.correct,c=u?e.incorrect:e.incorrect+1,a=u?1:0,l=Object.assign({},e.details,n({},r,[i,a]));return{correct:s,incorrect:c,details:l};default:return e}};t["default"]=o},459:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=o(r),u=function(){var e=arguments.length<=0||void 0===arguments[0]?{questions:{},options:{}}:arguments[0],t=arguments[1];switch(t.type){case"RECEIVE_ENTITIES":return i["default"].merge({},e,t.response.entities);default:return e}};t["default"]=u},460:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(72),i=n(25),u=n(459),s=o(u),c=n(457),a=o(c),l=n(458),f=o(l),d=n(461),p=o(d),h=function(e){return(0,r.combineReducers)({routing:i.routerReducer,entities:s["default"],answeredQuestions:a["default"],answers:f["default"],settings:p["default"]})};t["default"]=h},461:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=o(r),u=function(){var e=arguments.length<=0||void 0===arguments[0]?{checksum:null,timeOut:9999,order:"ASC",countDownRunning:!1,isFetching:!0}:arguments[0],t=arguments[1];switch(t.type){case"SET_CHECKSUM":return Object.assign({},e,{checksum:t.checksum});case"RECEIVE_SETTINGS":return i["default"].merge({},e,t.settings);case"COUNTDOWN_PROGRESS":return Object.assign({},e,{timeOut:e.timeOut-1});case"TOGGLE_ACTIVITY_INDICATOR":return Object.assign({},e,{isFetching:!e.isFetching});case"TOGGLE_COUNTDOWN":return Object.assign({},e,{countDownRunning:!e.countDownRunning});default:return e}};t["default"]=u},462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.entities=t.option=t.question=void 0;var o=n(38),r=t.question=new o.Schema("questions"),i=t.option=new o.Schema("options");r.define({options:(0,o.arrayOf)(i)});t.entities={questions:(0,o.arrayOf)(r),options:(0,o.arrayOf)(i)}},463:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getQuestionWithOptions=void 0;var r=n(19),i=o(r),u=n(55),s=function(e){return i["default"].values(e.entities.questions)},c=function(e){return i["default"].values(e.entities.options)},a=function(e){return e.answeredQuestions},l=(0,u.createSelector)(s,a,function(e,t){return i["default"].find(e,function(e){return t.indexOf(e.id)<0})});t.getQuestionWithOptions=(0,u.createSelector)(l,c,function(e,t){if(e){var n=i["default"].filter(t,function(t){return e.options.indexOf(t.id)>-1});return Object.assign({},e,{options:n})}return null})},464:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=(0,c["default"])(),n=(0,l.createStore)((0,p["default"])(),e,(0,l.compose)((0,l.applyMiddleware)(u["default"],h,t),window.devToolsExtension?window.devToolsExtension():function(e){return e}));return n}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var i=n(441),u=o(i),s=n(440),c=o(s),a=n(25),l=n(72),f=n(14),d=n(460),p=o(d),h=(0,a.routerMiddleware)(f.browserHistory)}});
//# sourceMappingURL=trivia.bundle.js.map